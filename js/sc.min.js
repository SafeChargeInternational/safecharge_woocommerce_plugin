
var isAjaxCalled=false;var manualChangedCountry=false;function scValidateAPMFields(){var a=true;if(jQuery("li.apm_container").length>0){jQuery("li.apm_container").each(function(){var d=jQuery(this);var c=d.find("input.sc_payment_method_field");if(c.is(":checked")){var b=d.find(".apm_field input");if(typeof b.attr("pattern")!="undefined"&&b.attr("pattern")!==false&&b.attr("pattern")!=""){var e=new RegExp(b.attr("pattern"),"i");if(e.test(b.val())==false||b.val()==""){b.parent(".apm_field").find(".apm_error").removeClass("error_info").show();a=false}else{b.parent(".apm_field").find(".error").hide()}}}})}if(a){jQuery("form.woocommerce-checkout").submit()}}function showErrorLikeInfo(a){jQuery("#error_"+a).addClass("error_info");if(jQuery("#error_"+a).css("display")=="block"){jQuery("#error_"+a).hide()}else{jQuery("#error_"+a).show()}}jQuery(function(){var a=jQuery("#billing_country").val();jQuery("#billing_country").change(function(){if(jQuery("#billing_country").val()!=a){manualChangedCountry=true;a=jQuery("#billing_country").val()}if(isAjaxCalled===false||manualChangedCountry===true){isAjaxCalled=true;jQuery.ajax({type:"POST",url:myAjax.ajaxurl,data:{country:jQuery("#billing_country").val(),callFromJS:1},dataType:"json"}).done(function(k){if(typeof k!="undefined"&&k!==null&&k.status==1&&typeof k.data.paymentMethods!="undefined"&&k.data.paymentMethods.length>0){var e="";var b=k.data.paymentMethods;e+='<ul id="sc_apms_list">';for(var d in b){var g=b[d]["logoURL"].replace("/svg/","/svg/solid-white/");e+='<li class="apm_container"><div class="apm_title"><img src="'+g+'" alt="'+b[d]["paymentMethodDisplayName"][0]["message"]+'"><input id="sc_payment_method_'+b[d].paymentMethod+'" type="radio" class="input-radio sc_payment_method_field" name="payment_method_sc" value="'+b[d].paymentMethod+'" /><span class=""></span></div><div class="apm_fields">';for(var c in b[d].fields){var f="";var h="";if(typeof b[d].fields[c].regex!="undefined"){f='pattern="'+b[d].fields[c].regex+'"'}if(typeof b[d].fields[c].validationmessage!="undefined"){h=b[d].fields[c].validationmessage[0].message}e+='<div class="apm_field"><input id="'+b[d].fields[c].name+'" name="'+b[d].paymentMethod+"["+b[d].fields[c].name+']" type="'+b[d].fields[c].type+'" '+f+" "+h+' placeholder="'+b[d].fields[c].caption[0].message+'" autocomplete="new-password" />';if(f!=""){e+='<span class="question_mark" onclick="showErrorLikeInfo(\'sc_'+b[d].fields[c].name+'\')"><span class="tooltip-icon"></span></span>'}if(f!=""){e+='<div class="apm_error" id="error_sc_'+b[d].fields[c].name+'"><label>'+h+"</label></div>"}e+="</div>"}e+="</div></li>"}e+="</ul>";jQuery(document).on("updated_checkout",function(){jQuery("#payment").find(".sc_apms").remove();if(e!=""){if(jQuery(".payment_method_sc:last").find("ul#sc_apms_list").length>0){jQuery(".payment_method_sc:last").find("ul#sc_apms_list").remove()}jQuery(".payment_method_sc:last").append(e);jQuery('form[name="checkout"]').attr("onsubmit","return false;");jQuery("form.woocommerce-checkout button[type=submit]").attr("type","button").attr("onclick","scValidateAPMFields()")}})}})}});jQuery("form.woocommerce-checkout").on("click",".apm_title",function(){jQuery("#sc_apms_list").find(".apm_title span").removeClass("apm_selected");jQuery("#sc_apms_list").find(".apm_fields").each(function(){var b=jQuery(this);if(b.css("display")=="block"){b.slideToggle("slow")}});jQuery(this).find("span").addClass("apm_selected");if(jQuery(this).parent("li").find(".apm_fields").html()==""){jQuery(this).parent("li").find(".apm_fields").css("border-bottom",0)}if(jQuery(this).parent("li").find(".apm_fields").css("display")=="none"){jQuery(this).parent("li").find(".apm_fields").slideToggle("slow")}jQuery("form.woocommerce-checkout").find("sc_payment_method_field").attr("checked",false);jQuery(this).find("input").attr("checked",true);jQuery(".apm_error").hide()})});